# リーダブルコード 第3章
[全体目次へ戻る](index.md)

## 3章 誤解されない名前
名前が **｢他の意味と間違えられることはないだろうか?｣** と自問自答することで、あいまいな名前をつけないようにする。

### 3.1 例:`filter()`
```py
results = Database.all_objects.filter("year <= 2011")
```
この`results`には`year <= 2011`であるものが入るのか、`year <= 2011` **でない** ものが入るのか曖昧。
前者なら`select()`、後者なら`exclude()`にしたほうがよい。

### 3.2 例:`Clip(text, length)`
```py
# textの最後を切り落として...をつける
def Clip(text, length):
  ...
```
この`Clip()`の動作は、｢最後から`length`文字削除する(`Remove`)｣｢最大`length`文字前で切り詰める(`Truncate`)｣の2通りが考えられる。どちらなのかを明確にするには`Remove()` `Truncate()`という名前にすべき。
- `Truncate`の場合、`length`という引数名は`max_length`のほうが明確。
- `length`ではバイト数なのか文字数なのか、または単語数なのかわからない。文字数なら`max_chars`とするとよい

### 3.3 限界値を含めるときは min と max を使う
｢限界値を含む｣ことをはっきりさせるには名前に`max` `min` を含めるとよい。

例) ショッピングカートの商品数の上限 `CART_TOO_BIG_LIMIT`→`MAX_ITEMS_IN_CART`

### 3.4 範囲を指定するときは first と last を使う
下のような場合、終点を含むのかどうかよく分からない。

```py
# [2, 3, 4]? [2, 3]?
print integer_range(start = 2, stop = 4)
```

両端を含む範囲(包含的範囲)を表す場合は、始点と終点にそれぞれ`first` `last`を使うとよい。
- `min` `max`を使うこともできる

### 3.5 包含/排他的範囲には begin と end を使う
始点は含み、終点は含まない範囲(包含/排他的範囲)を表す場合、`begin` `end`を使うのがイディオムとなっているので、これを利用するとよい。

### 3.6 ブール値の名前
ブール値の変数･ブール値を返す関数の名前は、`true`と`false`の意味が理解できるようにつける。

```c
// パスワードをこれから読み取るのか? パスワードを既に読み取っているのか?
bool read_password = true;
```

この場合は｢read｣を避け、`need_password`や`user_is_authenticated`を使う方がよい。

- ブール値である(を返す)変数･関数の名前には`is`, `has`, `can`, `should`などをつける慣習がある。言語によっては後ろに`?`などをつけることもある。
- 名前を否定形にするのは避けた方がよい。例) `dialble_ssl` → `use_ssl`

### 3.7 ユーザの期待に合わせる
ユーザの先入観のせいで誤解を招く名前がある。

- `get`で始まるメソッドは、メンバの値を返すだけの｢軽量アクセサ｣だと思われる。たとえその中でコストが高い処理を行っているとしても、ユーザは勘違いして呼び出してしまう。
  + この場合はコストの高さがわかるような名前(`compute ~`など)に変えるか、コストの高くない実装に変えるべき
- C++コレクションライブラリの`size`メソッドは定数時間で終わるメソッドを持つが、`list.size`は線形時間かかるため、定数時間で終わると期待して利用すると痛い目を見る。
  + 名前が`countSize`や`countElements`だったら避けられた問題
  + 最新のC++では`size`の計算量はO(1)にすることが定められている

### 3.8 複数の名前を検討する
名前を決めるときには、複数の候補のそれぞれの長所について検討して決定する。それが何を表す(何を行う)かが明確にわかり、誤解を生む可能性が低い名前を選ぶ。

***

[前へ](c2.md) /
[全体目次へ戻る](index.md) /
[次へ](c4.md)
