# リーダブルコード 第4章
[全体目次へ戻る](index.md)

## 4章 美しさ
優れたソースコードは｢目に優しい｣ものでなければならない。

余白･配置･順序に関する3つの原則
- 読み手が慣れているパターンと一貫性のあるレイアウトを使う
- 似ているコードは似ているように見せる
- 関連するコードをまとめてブロックにする

### 4.1 なぜ美しさが大切なのか?
**見た目が美しいコードのほうが使いやすい** から。コードを読むための時間を短縮することは使いやすさにつながる。

### 4.2 一貫性のある簡潔な改行位置
例) 任意の速度のネットワークに接続したときに、プログラムがどのように動くかを評価する`TcpConnectionSimulator`クラスを利用する

`TcpConnectionSimulator`のコンストラクタには4つの引数がある。
1. 接続速度(Kbps)
2. 平均遅延時間(ms)
3. 遅延時間(ms)
4. パケットロス率(%)

このクラスの3つのインスタンスを生成するコード例:

```java
public class PerformanceTester {
    public static final TcpConnectionSimulator wifi = new TcpConnectionSimulator(
        500, /* Kbps */
        80, /* millisecs latency */
        200, /* jitter */
        1 /* packet loss % */);

    public static final TcpConnectionSimulator t3_fiber =
        new TcpConnectionSimulator(
            45000, /* Kbps */
            10, /* millisecs latency */
            0, /* jitter */
            0 /* packet loss % */);

    public static final TcpConnectionSimulator cell = new TcpConnectionSimulator(
        100, /* Kbps */
        400, /* millisecs latency */
        250, /* jitter */
        5 /* packet loss % */);
}
```

余計な改行のせいで`t3_fiber`だけ見た目が変になってしまい、自然とそこに目が行ってしまうし、｢似ているコードは似ているように見せる｣という原則も守られていない。

コードの見た目を一貫性のあるものにするには、適切な改行を入れる(コメントも整列させるとよい)。

```java
public class PerformanceTester {
    public static final TcpConnectionSimulator wifi =
        new TcpConnectionSimulator(
            500,  /* Kbps */
            80,   /* millisecs latency */
            200,  /* jitter */
            1     /* packet loss % */);

    public static final TcpConnectionSimulator t3_fiber =
        new TcpConnectionSimulator(
            45000,/* Kbps */
            10,   /* millisecs latency */
            0,    /* jitter */
            0     /* packet loss % */);

    public static final TcpConnectionSimulator cell =
        new TcpConnectionSimulator(
            100,  /* Kbps */
            400,  /* millisecs latency */
            250,  /* jitter */
            5     /* packet loss % */);
}
```

縦に長く、コメントが繰り返されている点を修正し、簡潔に書くと以下のようになる。

```java
public class PerformanceTester {
    // TcpConnectionSimulator(throughput, latency, jitter, packetLoss)
    //                            [Kbps]   [ms]    [ms]    [percent]
    public static final TcpConnectionSimulator wifi =
        new TcpConnectionSimulator(500,    80,     200,    1);

    public static final TcpConnectionSimulator t3_fiber =
        new TcpConnectionSimulator(45000,  10,     0,      0);

    public static final TcpConnectionSimulator cell =
        new TcpConnectionSimulator(100,    400,    250,    5);
}
```

### 4.3 メソッドを使った整列


***

[前へ](c3.md) /
[全体目次へ戻る](index.md) /
[次へ](c5.md)
